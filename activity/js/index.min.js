$(function(){let APIUrl="";if(window.location.host.match("static.xiaotucc.com")!=null){APIUrl="https://web.xiaotucc.com"}else if(window.location.host.match("statictest.xiaotucc.com")!=null){APIUrl="https://webtest.xiaotucc.com"}else if(window.location.host.match("127.0.0.1")!=null||window.location.host.match("192.168.1.110")!=null){APIUrl="https://weiqin.wcsmalllife.com"};let $path=location.href.split('#')[0];$.ajax({type:'POST',url:APIUrl+'/recruit/getPackage',data:{url:$path},success:function(data){if(data.status=200){console.log(data);wx.config({debug:true,appId:data.data.appId,timestamp:data.data.timestamp,nonceStr:data.data.nonceStr,signature:data.data.signature,jsApiList:['onMenuShareTimeline','onMenuShareAppMessage','hideMenuItems']});wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:facebook","menuItem:share:QZone","menuItem:share:qq","menuItem:share:weiboApp"]});wx.onMenuShareTimeline({title:'【站长招募令】你的"站”，你做"主"',link:$path,imgUrl:'../img/shareIcon.png',success:function(){location.reload()},});wx.onMenuShareAppMessage({title:'【站长招募令】你的"站”，你做"主"',desc:'充电站“站长”紧急招募中，0风险创业躺着赚钱',link:$path,imgUrl:'../img/shareIcon.png',type:'',dataUrl:'',success:function(){location.reload()}})})}else{layer.open({content:data.msg,skin:'msg',time:2})}},error:function(xhr,type){layer.open({content:'请求错误，请重试！',skin:'msg',time:2})}});setInterval(function(){if($('.animated').hasClass('shake')){$('.animated').removeClass('shake')}else{$('.animated').addClass('shake')}},1000);function selectHandle(nowValue,dataArr){new Picker({"title":'请选择',"defaultValue":nowValue.value,"data":dataArr,"keys":{"id":"Code","value":"Name","childData":"level"},"callBack":function(val){nowValue.value=val}})};$('body').on('touchend','#sex',function(){document.activeElement.blur();let nowValue=document.getElementById('sex');let dataArr=[{"Code":"940000","Name":"男",},{"Code":"940000","Name":"女",}];selectHandle(nowValue,dataArr)});$('body').on('touchend','#level',function(){document.activeElement.blur();let nowValue=document.getElementById('level');let levelData=[{"Code":"940000","Name":"认领1台",},{"Code":"940001","Name":"认领5台",},{"Code":"940002","Name":"认领30台",}];selectHandle(nowValue,levelData)});$('body').on('touchend','#city',function(){document.activeElement.blur();let nowValue=document.getElementById('city');selectHandle(nowValue,cityData)});$('.activityCon').on('click','.submit',function(){let content='<div class="popCon">'+'<i class="close"></i>'+'<div class="success"></div>'+'<div class="subSucess">提交成功</div>'+'<button class="submit ripple share">分享给好友</button>'+'</div>';let $name=$('#name').val(),$sex=$('#sex').val(),$tel=$('#tel').val(),$level=$('#level').val(),$city=$('#city').val();if(!$name||!$tel||!$level||!$city){layer.open({content:'请您填写完整信息',skin:'msg',time:2});return false};if(!(/^1[3|4|5|8|7][0-9]\d{4,8}$/.test($tel))){layer.open({content:'请输入正确的手机号码',skin:'msg',time:2});return false};let param={name:$name,gender:$sex,phone:$tel,grade:$level,address:$city};let loadIndex=layer.open({type:2,shadeClose:false,content:'正在提交...'});$.ajax({type:'POST',url:APIUrl+'/recruit/new',data:param,success:function(data){if(data.status=200){layer.close(loadIndex);layer.open({shadeClose:false,content:content});$('input').val('');$('#sex').val('男')}else{layer.open({content:data.msg,skin:'msg',time:2})}},error:function(xhr,type){layer.open({content:'请求错误，请重试！',skin:'msg',time:2})}})});$('.activityCon').scroll(function(){let distance=$(this).scrollTop();let limitHeight=$('.activityImg_1').height()+$('.activityImg_2').height();let winHeight=limitHeight+$('.activityImg_4').height()+$('.activityImg_3').height();if(distance<limitHeight-75||distance>winHeight-75){$('.joinUs').removeClass('showJoin');}else if(distance>=limitHeight-75){$('.joinUs').addClass('showJoin')}});$('body').on('touchend','.close',function(e){e.stopPropagation();layer.closeAll();return false});$('body').on('touchend','.share',function(e){e.stopPropagation();layer.closeAll();$('.shareTip').show()})})